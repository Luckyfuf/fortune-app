<script>
    const IMG_URLS = {
        page2: 'https://i.postimg.cc/pLH2r557/guo-chang-ye.gif',
        page3: 'https://i.postimg.cc/vZsQTxxt/zhong-qian-ye.gif',
        static: 'https://i.postimg.cc/Bb100Qg5/zhong-qian-ding-ge.jpg'
    };

    let fortuneData = [];

    // 1. 頁面一載入，只抓過場圖和 JSON
    async function initApp() {
        // 同步抓取資料
        fetch('data.json').then(r => r.json()).then(d => fortuneData = d);

        // 2秒後切換
        setTimeout(showResultPage, 2000);

        // 【進階優化】延遲 500ms 後才開始偷偷下載中籤圖，不搶過場圖的頻寬
        setTimeout(() => {
            const pre3 = new Image();
            pre3.src = IMG_URLS.page3;
            const preS = new Image();
            preS.src = IMG_URLS.static;
        }, 500);
    }

    function showResultPage() {
        const gif2 = document.getElementById('gif2');
        const gif3 = document.getElementById('gif3');
        
        document.getElementById('page2').style.display = 'none';
        gif3.src = IMG_URLS.page3;
        document.getElementById('page3').style.display = 'flex';

        // ...後續邏輯不變
    }
    
    window.addEventListener('load', initApp);
</script>